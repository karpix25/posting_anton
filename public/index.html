<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>–ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è (v1.1)</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/3.3.4/vue.global.prod.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="/css/main.css">
</head>

<body class="bg-gray-100 text-gray-800">
    <div id="app" class="min-h-screen p-8">

        <!-- Header -->
        <div class="max-w-6xl mx-auto mb-8 flex justify-between items-center">
            <h1 class="text-3xl font-bold text-blue-600 flex items-center gap-3">
                üöÄ –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –ö–æ–Ω—Ç–µ–Ω—Ç–∞
                <span v-if="dbStatus"
                    class="text-xs bg-green-100 text-green-700 px-2 py-1 rounded border border-green-200"
                    title="Database Connected">
                    üü¢ DB OK
                </span>
                <span v-else class="text-xs bg-red-100 text-red-700 px-2 py-1 rounded border border-red-200"
                    title="Database Disconnected">
                    üî¥ DB Error
                </span>
            </h1>
            <button @click="saveConfig" aria-label="–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏"
                class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded shadow focus-visible:ring-2 focus-visible:ring-green-300">
                –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
            </button>
        </div>

        <!-- Main Content -->
        <div class="max-w-6xl mx-auto bg-white rounded-lg shadow-lg overflow-hidden flex">

            <!-- Sidebar / Tabs -->
            <div class="w-64 bg-gray-50 border-r p-4 space-y-2">
                <button v-for="tab in tabs" :key="tab.id" @click="currentTab = tab.id"
                    :class="['w-full text-left px-4 py-2 rounded', currentTab === tab.id ? 'bg-blue-100 text-blue-700 font-semibold' : 'hover:bg-gray-200']">
                    {{ tab.name }}
                </button>
            </div>

            <!-- Tab Content -->
            <div class="flex-1 p-8">
                <div v-if="loading" class="text-center text-gray-500">–ó–∞–≥—Ä—É–∑–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫...</div>

                <div v-else>

                    <!-- DASHBOARD TAB -->
                    <div v-if="currentTab === 'dashboard'">
                        <h2 class="text-2xl font-bold mb-4">–°—Ç–∞—Ç—É—Å</h2>
                        <div class="grid grid-cols-3 gap-4 mb-8">
                            <div class="bg-blue-50 p-4 rounded border border-blue-100">
                                <div class="text-sm text-gray-500">–°–ª–µ–¥—É—é—â–∏–π –∑–∞–ø—É—Å–∫</div>
                                <div class="text-lg font-mono">{{ formatCron(config.cronSchedule) }}</div>
                            </div>
                            <div class="bg-purple-50 p-4 rounded border border-purple-100">
                                <div class="text-sm text-gray-500">–ê–∫—Ç–∏–≤–Ω—ã–µ –ø—Ä–æ—Ñ–∏–ª–∏</div>
                                <div class="text-lg font-bold">{{ config.profiles?.length || 0 }}</div>
                            </div>
                            <div
                                class="bg-indigo-50 p-4 rounded border border-indigo-100 flex flex-col justify-between">
                                <div>
                                    <div class="text-sm text-gray-500">–í–∏–¥–µ–æ –Ω–∞ –¥–∏—Å–∫–µ</div>
                                    <div class="text-lg font-bold" v-if="stats">{{ stats.totalVideos }}</div>
                                    <div class="text-lg font-bold text-gray-400" v-else>--</div>
                                </div>
                                <button @click="loadStats" aria-label="–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –≤–∏–¥–µ–æ"
                                    class="mt-2 text-xs bg-indigo-200 hover:bg-indigo-300 px-2 py-1 rounded text-indigo-800 self-start focus-visible:ring-2 focus-visible:ring-indigo-500">
                                    üîÑ Sync
                                </button>
                            </div>
                        </div>

                        <!-- Today Stats Cards -->
                        <div class="flex gap-4 flex-wrap">
                            <!-- Date Card -->
                            <div
                                class="bg-gradient-to-br from-slate-50 to-slate-100 border border-slate-200 p-4 rounded-lg shadow-sm min-w-[140px]">
                                <div class="text-sm text-slate-500 mb-1">üìÖ –î–∞—Ç–∞ (–ú–°–ö)</div>
                                <div class="text-xl font-bold text-slate-700">{{ todayStats.date || '--' }}</div>
                                <div class="text-xs text-slate-400 mt-1">{{ todayStats.time_msk || '--:--' }}</div>
                            </div>

                            <!-- Success Posts -->
                            <div
                                class="bg-gradient-to-br from-green-50 to-emerald-100 border border-green-200 p-4 rounded-lg shadow-sm min-w-[140px]">
                                <div class="text-sm text-green-600 mb-1">‚úÖ –û–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–æ</div>
                                <div class="text-2xl font-bold text-green-700">{{ todayStats.success_count || 0 }}</div>
                                <div class="text-xs text-green-500 mt-1">–∑–∞ —Å–µ–≥–æ–¥–Ω—è</div>
                            </div>

                            <!-- Active Profiles -->
                            <div
                                class="bg-gradient-to-br from-blue-50 to-indigo-100 border border-blue-200 p-4 rounded-lg shadow-sm min-w-[140px]">
                                <div class="text-sm text-blue-600 mb-1">üë§ –ü—Ä–æ—Ñ–∏–ª–µ–π</div>
                                <div class="text-2xl font-bold text-blue-700">{{ todayStats.profiles_count || 0 }}</div>
                                <div class="text-xs text-blue-500 mt-1">–∞–∫—Ç–∏–≤–Ω—ã—Ö</div>
                            </div>

                            <!-- Queued Posts -->
                            <div
                                class="bg-gradient-to-br from-amber-50 to-orange-100 border border-amber-200 p-4 rounded-lg shadow-sm min-w-[140px]">
                                <div class="text-sm text-amber-600 mb-1">‚è≥ –í –æ—á–µ—Ä–µ–¥–∏</div>
                                <div class="text-2xl font-bold text-amber-700">{{ todayStats.queued_count || 0 }}</div>
                                <div class="text-xs text-amber-500 mt-1">–æ–∂–∏–¥–∞—é—Ç</div>
                            </div>

                            <!-- Failed Posts -->
                            <div v-if="todayStats.failed_count > 0"
                                class="bg-gradient-to-br from-red-50 to-rose-100 border border-red-200 p-4 rounded-lg shadow-sm min-w-[140px]">
                                <div class="text-sm text-red-600 mb-1">‚ùå –û—à–∏–±–∫–∏</div>
                                <div class="text-2xl font-bold text-red-700">{{ todayStats.failed_count }}</div>
                                <div class="text-xs text-red-500 mt-1">–∑–∞ —Å–µ–≥–æ–¥–Ω—è</div>
                            </div>
                        </div>

                        <!-- Failed Posts Toggle -->
                        <div v-if="publicationErrors.length > 0"
                            class="mb-8 bg-red-50 border border-red-200 rounded-lg overflow-hidden transition-all duration-300">
                            <!-- Header / Toggle -->
                            <div @click="showErrors = !showErrors"
                                class="p-4 flex items-center justify-between cursor-pointer hover:bg-red-100/50 transition-colors">
                                <div class="flex items-center gap-3">
                                    <div class="bg-red-100 text-red-600 rounded-full p-2">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none"
                                            viewBox="0 0 24 24" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                                d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                                        </svg>
                                    </div>
                                    <div>
                                        <h3 class="text-lg font-bold text-red-800">–û–±–Ω–∞—Ä—É–∂–µ–Ω—ã –æ—à–∏–±–∫–∏ ({{
                                            publicationErrors.length }})</h3>
                                        <p class="text-xs text-red-600">–ù–∞–∂–º–∏—Ç–µ, —á—Ç–æ–±—ã —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å —Å–ø–∏—Å–æ–∫ –ø—Ä–æ–±–ª–µ–º</p>
                                    </div>
                                </div>
                                <div class="transform transition-transform duration-300"
                                    :class="{ 'rotate-180': showErrors }">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-red-400" fill="none"
                                        viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M19 9l-7 7-7-7" />
                                    </svg>
                                </div>
                            </div>

                            <!-- Content -->
                            <div v-if="showErrors" class="border-t border-red-100 bg-white">
                                <div class="max-h-60 overflow-y-auto">
                                    <div v-for="err in publicationErrors" :key="err.id"
                                        class="p-3 border-b border-red-50 flex items-start gap-3 hover:bg-red-50/30 transition-colors text-sm last:border-0">
                                        <span class="font-mono text-red-400 text-xs mt-1 whitespace-nowrap">{{
                                            formatTime(err.posted_at) }}</span>
                                        <div class="flex-1">
                                            <div class="font-bold text-gray-800 flex items-center gap-2">
                                                {{ err.profile_username }}
                                                <span class="text-xs bg-gray-100 text-gray-500 px-2 py-0.5 rounded">{{
                                                    err.platform }}</span>
                                            </div>
                                            <div class="text-red-600 mt-1">{{ err.meta.error || 'Unknown error' }}</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Action Buttons -->
                        <div class="flex gap-4">
                            <button @click="triggerRun(false)"
                                class="flex-1 bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded text-lg font-semibold shadow-lg shadow-blue-200 transition-all hover:shadow-blue-300 active:scale-95">
                                –ó–∞–ø—É—Å—Ç–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—é
                            </button>
                            <button @click="triggerRun(true)"
                                class="bg-amber-500 hover:bg-amber-600 text-white px-6 py-3 rounded text-lg font-semibold"
                                title="Only 1 post per platform (Safe Mode)">
                                üß™ –¢–µ—Å—Ç–æ–≤—ã–π –∑–∞–ø—É—Å–∫ (1 –ø–æ—Å—Ç)
                            </button>
                            <button @click="triggerCleanup"
                                class="bg-red-500 hover:bg-red-600 text-white px-6 py-3 rounded text-lg font-semibold"
                                title="–£–¥–∞–ª–∏—Ç—å –≤—Å–µ –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ—Å—Ç—ã">
                                üóëÔ∏è –°–±—Ä–æ—Å
                            </button>
                        </div>
                    </div>

                    <!-- STATS TAB -->
                    <div v-if="currentTab === 'stats'">
                        <div class="flex justify-between items-center mb-6">
                            <h2 class="text-2xl font-bold">–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h2>
                            <button @click="loadStats(true)" aria-label="–û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É"
                                class="text-sm bg-gray-200 px-3 py-1 rounded hover:bg-gray-300 focus-visible:ring-2 focus-visible:ring-blue-500">üîÑ
                                –û–±–Ω–æ–≤–∏—Ç—å</button>
                        </div>

                        <div v-if="statsLoading" class="text-center py-8 text-gray-500">–°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –Ø–Ω–¥–µ–∫—Å –î–∏—Å–∫–∞...
                        </div>
                        <div v-else>
                            <!-- Overview Cards -->
                            <div class="grid grid-cols-2 gap-6 mb-8">
                                <div class="bg-blue-50 p-6 rounded-lg border border-blue-100 text-center">
                                    <div class="text-gray-500 mb-1">–í—Å–µ–≥–æ –¥–æ—Å—Ç—É–ø–Ω–æ –≤–∏–¥–µ–æ</div>
                                    <div class="text-4xl font-bold text-blue-700">{{ stats.totalVideos }}</div>
                                    <div class="text-xs text-blue-400 mt-2">–ì–æ—Ç–æ–≤—ã –∫ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ (Yandex Disk)</div>
                                </div>
                                <div class="bg-green-50 p-6 rounded-lg border border-green-100 text-center">
                                    <div class="text-gray-500 mb-1">–û–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–æ –∏ —É–¥–∞–ª–µ–Ω–æ</div>
                                    <div class="text-4xl font-bold text-green-700">{{ stats.publishedCount }}</div>
                                    <div class="text-xs text-green-400 mt-2">–ó–∞ –≤—Å—ë –≤—Ä–µ–º—è</div>
                                </div>
                            </div>

                            <!-- Statistics Summary Cards -->
                            <div v-if="statsSummary" class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                                <div
                                    class="bg-gradient-to-br from-green-500 to-green-600 rounded-lg p-6 text-white shadow-lg">
                                    <div class="text-sm opacity-90">–û–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–æ</div>
                                    <div class="text-3xl font-bold mt-2">{{ statsSummary.published_total }}</div>
                                </div>
                                <div
                                    class="bg-gradient-to-br from-red-500 to-red-600 rounded-lg p-6 text-white shadow-lg">
                                    <div class="text-sm opacity-90">–£–¥–∞–ª–µ–Ω–æ</div>
                                    <div class="text-3xl font-bold mt-2">{{ statsSummary.deleted_total }}</div>
                                </div>
                                <div
                                    class="bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg p-6 text-white shadow-lg">
                                    <div class="text-sm opacity-90">Instagram</div>
                                    <div class="text-3xl font-bold mt-2">{{ statsSummary.by_platform.instagram }}</div>
                                </div>
                                <div
                                    class="bg-gradient-to-br from-purple-500 to-purple-600 rounded-lg p-6 text-white shadow-lg">
                                    <div class="text-sm opacity-90">TikTok + YouTube</div>
                                    <div class="text-3xl font-bold mt-2">{{ statsSummary.by_platform.tiktok +
                                        statsSummary.by_platform.youtube }}</div>
                                </div>
                            </div>

                            <!-- Categories Breakdown -->
                            <div class="flex justify-between items-center mb-4">
                                <h3 class="text-xl font-bold">–†–∞–∑–±–∏–≤–∫–∞ –ø–æ {{ statsViewMode === 'category' ? '–ö–∞—Ç–µ–≥–æ—Ä–∏—è–º'
                                    :
                                    (statsViewMode
                                    === 'brand' ? '–ë—Ä–µ–Ω–¥–∞–º' : '–ê–≤—Ç–æ—Ä–∞–º') }}
                                </h3>

                                <div class="bg-gray-200 p-1 rounded-lg flex text-sm">
                                    <button @click="statsViewMode = 'category'"
                                        :class="['px-3 py-1 rounded-md transition', statsViewMode === 'category' ? 'bg-white shadow text-blue-600 font-bold' : 'text-gray-600 hover:text-gray-800']">
                                        –ü–æ –¢–µ–º–∞–º
                                    </button>
                                    <button @click="statsViewMode = 'author'"
                                        :class="['px-3 py-1 rounded-md transition', statsViewMode === 'author' ? 'bg-white shadow text-blue-600 font-bold' : 'text-gray-600 hover:text-gray-800']">
                                        –ü–æ –ê–≤—Ç–æ—Ä–∞–º
                                    </button>
                                    <button @click="statsViewMode = 'brand'"
                                        :class="['px-3 py-1 rounded-md transition', statsViewMode === 'brand' ? 'bg-white shadow text-blue-600 font-bold' : 'text-gray-600 hover:text-gray-800']">
                                        –ü–æ –ë—Ä–µ–Ω–¥–∞–º
                                    </button>
                                </div>
                            </div>
                            <div class="bg-white border rounded-lg overflow-hidden">
                                <table class="w-full border-collapse mt-6">
                                    <thead class="bg-gray-100">
                                        <tr>
                                            <th class="text-left p-3 border-b">{{ statsHeader }}</th>
                                            <th class="text-left p-3 border-b">–ü—Ä–æ—Ñ–∏–ª–∏</th>
                                            <th class="text-right p-3 border-b w-32">–ù–∞ –î–∏—Å–∫–µ</th>
                                            <th class="text-right p-3 border-b w-32">–û–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–æ</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr v-for="item in currentStatsList" :key="item.name"
                                            class="border-b hover:bg-gray-50">
                                            <td class="p-3 capitalize">{{ item.name }}</td>
                                            <td class="p-3">
                                                <div class="flex gap-2 flex-wrap">
                                                    <span v-for="profile in getProfilesForCategory(item.name)"
                                                        :key="profile"
                                                        class="px-2 py-1 text-xs bg-blue-50 text-blue-700 rounded">
                                                        {{ profile }}
                                                    </span>
                                                    <span
                                                        v-if="!getProfilesForCategory(item.name) || getProfilesForCategory(item.name).length === 0"
                                                        class="text-gray-400 text-sm italic">
                                                        –ù–µ—Ç –ø—Ä–æ—Ñ–∏–ª–µ–π
                                                    </span>
                                                </div>
                                            </td>
                                            <td class="p-3 text-right font-semibold">{{ item.count.toLocaleString() }}
                                            </td>
                                            <td class="p-3 text-right font-bold text-green-600">{{
                                                getPublishedCount(item.name) }}</td>
                                        </tr>
                                        <tr v-if="currentStatsList.length === 0">
                                            <td colspan="3" class="p-4 text-center text-gray-400">–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã.
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <!-- SETTINGS TAB -->
                    <div v-if="currentTab === 'settings'">
                        <h2 class="text-2xl font-bold mb-4">–û–±—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</h2>

                        <!-- Schedule Settings -->
                        <div class="mb-6 p-4 bg-blue-50 border border-blue-200 rounded">
                            <h3 class="text-lg font-bold mb-3">‚è∞ –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏</h3>

                            <div class="mb-4">
                                <label class="flex items-center cursor-pointer">
                                    <input type="checkbox" v-model="schedule.enabled" class="mr-2 w-5 h-5">
                                    <span class="font-semibold">–í–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫</span>
                                </label>
                                <p class="text-xs text-gray-600 mt-1 ml-7">–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –±—É–¥–µ—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤
                                    —É–∫–∞–∑–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è
                                </p>
                            </div>

                            <div class="grid grid-cols-2 gap-4">
                                <div>
                                    <label class="block mb-2 font-semibold">–í—Ä–µ–º—è –∑–∞–ø—É—Å–∫–∞</label>
                                    <input type="time" v-model="schedule.dailyRunTime" class="w-full border p-2 rounded"
                                        :disabled="!schedule.enabled">
                                    <p class="text-xs text-gray-500 mt-1">–§–æ—Ä–º–∞—Ç: HH:MM (24-—á–∞—Å–æ–≤–æ–π)</p>
                                </div>

                                <div>
                                    <label class="block mb-2 font-semibold">–ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å</label>
                                    <select v-model="schedule.timezone" class="w-full border p-2 rounded"
                                        :disabled="!schedule.enabled">
                                        <option value="Europe/Moscow">–ú–æ—Å–∫–≤–∞ (–ú–°–ö, UTC+3)</option>
                                        <option value="Europe/Kiev">–ö–∏–µ–≤ (UTC+2)</option>
                                        <option value="Asia/Yekaterinburg">–ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥ (UTC+5)</option>
                                        <option value="Asia/Novosibirsk">–ù–æ–≤–æ—Å–∏–±–∏—Ä—Å–∫ (UTC+7)</option>
                                        <option value="UTC">UTC (UTC+0)</option>
                                    </select>
                                </div>
                            </div>

                            <div class="mt-4 flex justify-between items-center">
                                <div class="text-sm text-gray-600">
                                    <span v-if="schedule.enabled" class="text-green-600 font-semibold">‚úì –ê–∫—Ç–∏–≤–Ω–æ</span>
                                    <span v-else class="text-gray-400">‚óã –û—Ç–∫–ª—é—á–µ–Ω–æ</span>
                                    <span v-if="schedule.enabled"> ‚Ä¢ –ó–∞–ø—É—Å–∫: {{ schedule.dailyRunTime }} ({{
                                        schedule.timezone }})</span>
                                </div>
                                <button @click="saveSchedule"
                                    class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded text-sm font-semibold">
                                    üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ
                                </button>
                            </div>
                        </div>

                        <div class="mb-4">
                            <label class="block mb-2 font-semibold">–ü–∞–ø–∫–∏ –Ø–Ω–¥–µ–∫—Å –î–∏—Å–∫–∞ (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é)</label>
                            <input v-model="foldersInput" @input="updateFolders" class="w-full border p-2 rounded">
                        </div>

                        <div class="mb-4">
                            <label class="block mb-2 font-semibold">–ù–∞ —Å–∫–æ–ª—å–∫–æ –¥–Ω–µ–π –ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –≤–ø–µ—Ä–µ–¥?</label>
                            <input type="number" min="1" max="30" v-model.number="config.daysToGenerate"
                                autocomplete="off" class="w-full border p-2 rounded" placeholder="1">
                            <p class="text-xs text-gray-500 mt-1">1 = —Ç–æ–ª—å–∫–æ —Å–µ–≥–æ–¥–Ω—è. 7 = –Ω–µ–¥–µ–ª—è.</p>
                        </div>

                        <h3 class="text-xl font-bold mt-6 mb-4">–õ–∏–º–∏—Ç—ã –ø–ª–∞—Ç—Ñ–æ—Ä–º (–ø–æ—Å—Ç–æ–≤ –≤ –¥–µ–Ω—å –Ω–∞ –ø—Ä–æ—Ñ–∏–ª—å)</h3>
                        <div class="grid grid-cols-3 gap-4">
                            <div>
                                <label>Instagram</label>
                                <input type="number" v-model="config.limits.instagram"
                                    class="w-full border p-2 rounded">
                            </div>
                            <div>
                                <label>TikTok</label>
                                <input type="number" v-model="config.limits.tiktok" class="w-full border p-2 rounded">
                            </div>
                            <div>
                                <label>YouTube</label>
                                <input type="number" v-model="config.limits.youtube" class="w-full border p-2 rounded">
                            </div>
                        </div>
                    </div>

                    <!-- PROFILES TAB -->
                    <div v-if="currentTab === 'profiles'">
                        <div class="flex justify-between items-center mb-4">
                            <h2 class="text-2xl font-bold">–°–æ—Ü–∏–∞–ª—å–Ω—ã–µ –ø—Ä–æ—Ñ–∏–ª–∏</h2>
                            <div class="space-x-2">
                                <button @click="syncProfiles" aria-label="–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª–∏ —Å UploadPost"
                                    class="text-sm bg-blue-100 text-blue-700 px-3 py-1 rounded hover:bg-blue-200 focus-visible:ring-2 focus-visible:ring-blue-500">üîÑ
                                    –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å
                                    (UploadPost)</button>
                                <button @click="fullResync" aria-label="–ü–æ–ª–Ω—ã–π —Å–±—Ä–æ—Å –∏ –∑–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ—Ñ–∏–ª–µ–π –∑–∞–Ω–æ–≤–æ"
                                    class="text-sm bg-red-100 text-red-700 px-3 py-1 rounded hover:bg-red-200 border border-red-300 focus-visible:ring-2 focus-visible:ring-red-500">
                                    ‚ö†Ô∏è –ü–æ–ª–Ω—ã–π –°–±—Ä–æ—Å (–°–∫–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ)
                                </button>
                                <button @click="addProfile"
                                    class="text-sm bg-gray-200 px-3 py-1 rounded hover:bg-gray-300">+ –î–æ–±–∞–≤–∏—Ç—å
                                    –ø—Ä–æ—Ñ–∏–ª—å</button>
                            </div>
                        </div>

                        <!-- Active Profiles -->
                        <div v-if="activeProfiles.length > 0">
                            <div class="flex justify-between items-center mb-3 p-3 bg-gray-50 rounded">
                                <button @click="showActiveProfiles = !showActiveProfiles"
                                    class="flex-1 text-left text-lg font-semibold hover:text-blue-600 flex items-center gap-2">
                                    <span>üü¢ –ê–∫—Ç–∏–≤–Ω—ã–µ –ü—Ä–æ—Ñ–∏–ª–∏ ({{ activeProfiles.length }})</span>
                                    <span class="text-xl">{{ showActiveProfiles ? '‚ñº' : '‚ñ∂' }}</span>
                                </button>
                                <div class="flex gap-2 text-sm" v-if="showActiveProfiles">
                                    <button @click="expandAllGroups(true)"
                                        class="text-blue-600 hover:underline">–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å
                                        –≤—Å–µ</button>
                                    <span class="text-gray-300">|</span>
                                    <button @click="expandAllGroups(false)"
                                        class="text-blue-600 hover:underline">–°–≤–µ—Ä–Ω—É—Ç—å
                                        –≤—Å–µ</button>
                                </div>
                            </div>

                            <!-- BULK ACTIONS BAR (Floating / Top) -->
                            <div v-if="selectedProfiles.length > 0"
                                class="sticky top-0 z-10 bg-blue-600 text-white p-4 rounded shadow-lg mb-4 flex justify-between items-center">
                                <div class="font-bold">
                                    –í—ã–±—Ä–∞–Ω–æ –ø—Ä–æ—Ñ–∏–ª–µ–π: {{ selectedProfiles.length }}
                                </div>
                                <div class="flex items-center gap-2">
                                    <span>–ü—Ä–∏–º–µ–Ω–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é –∫–æ –≤—Å–µ–º:</span>
                                    <select v-model="bulkThemeKey"
                                        class="p-1 px-2 rounded text-black w-40 border border-gray-300">
                                        <option disabled value="">–í—ã–±–µ—Ä–∏—Ç–µ...</option>
                                        <option v-for="theme in availableThemes" :key="theme" :value="theme">
                                            {{ theme }}
                                        </option>
                                    </select>
                                    <button @click="applyBulkCategory"
                                        class="bg-white text-blue-600 font-bold px-4 py-1 rounded hover:bg-gray-100">
                                        –ü—Ä–∏–º–µ–Ω–∏—Ç—å
                                    </button>

                                    <div class="border-l border-blue-400 pl-4 ml-2 flex items-center gap-2">
                                        <span class="text-sm font-medium">–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å:</span>
                                        <button @click="toggleBulkEnabled(true)"
                                            class="bg-green-500 hover:bg-green-600 text-white font-bold px-3 py-1 rounded text-sm">
                                            ‚úÖ –í–∫–ª—é—á–∏—Ç—å
                                        </button>
                                        <button @click="toggleBulkEnabled(false)"
                                            class="bg-red-500 hover:bg-red-600 text-white font-bold px-3 py-1 rounded text-sm">
                                            ‚ùå –í—ã–∫–ª—é—á–∏—Ç—å
                                        </button>
                                    </div>
                                    <button @click="selectedProfiles = []"
                                        class="ml-4 text-sm text-blue-200 hover:text-white underline">
                                        –°–±—Ä–æ—Å–∏—Ç—å –≤—ã–¥–µ–ª–µ–Ω–∏–µ
                                    </button>
                                </div>
                            </div>

                            <div v-if="showActiveProfiles">
                                <div v-for="(profiles, theme) in groupedActiveProfiles" :key="theme"
                                    class="mb-4 border rounded overflow-hidden">
                                    <!-- Group Header -->
                                    <div
                                        class="bg-blue-50 p-3 font-semibold flex justify-between items-center hover:bg-blue-100 transition-colors">
                                        <div class="flex items-center gap-3 flex-1">
                                            <input type="checkbox"
                                                :checked="profiles.every(p => selectedProfiles.includes(p.username))"
                                                @change="toggleGroupSelection(profiles, $event.target.checked)"
                                                class="w-5 h-5 rounded cursor-pointer" title="–í—ã–±—Ä–∞—Ç—å –≤—Å—é –≥—Ä—É–ø–ø—É">

                                            <div @click="toggleGroup(theme)"
                                                class="flex items-center gap-2 cursor-pointer flex-1">
                                                <span>üìÅ {{ theme }}</span>
                                                <span
                                                    class="bg-blue-200 text-blue-800 text-xs px-2 py-1 rounded-full">{{
                                                    profiles.length
                                                    }}</span>
                                            </div>
                                        </div>
                                        <span @click="toggleGroup(theme)" class="text-gray-500 cursor-pointer p-2">{{
                                            expandedGroups[theme]
                                            ? '‚ñº' : '‚ñ∂' }}</span>
                                    </div>

                                    <!-- Group Content (Table) -->
                                    <div v-show="expandedGroups[theme]" class="border-t">
                                        <table class="w-full border-collapse">
                                            <thead class="bg-gray-50 text-xs text-gray-500 uppercase">
                                                <tr>
                                                    <th class="p-3 w-8"><input type="checkbox"
                                                            @change="toggleGroupSelection(profiles, $event.target.checked)"
                                                            :checked="profiles.every(p => selectedProfiles.includes(p.username))">
                                                    </th>
                                                    <th class="text-left p-3 w-12"></th>
                                                    <th class="text-left p-3">–ü—Ä–æ—Ñ–∏–ª—å</th>
                                                    <th class="text-left p-3">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</th>
                                                    <th class="text-left p-3">–ü–ª–∞—Ç—Ñ–æ—Ä–º—ã</th>
                                                    <th class="text-center p-3 w-14" title="Instagram –ø–æ—Å—Ç–æ–≤/–¥–µ–Ω—å">üì∏ IG
                                                    </th>
                                                    <th class="text-center p-3 w-14" title="TikTok –ø–æ—Å—Ç–æ–≤/–¥–µ–Ω—å">üéµ TT
                                                    </th>
                                                    <th class="text-center p-3 w-14" title="YouTube –ø–æ—Å—Ç–æ–≤/–¥–µ–Ω—å">üìπ YT
                                                    </th>
                                                    <th class="text-center p-3 w-20">–í–∫–ª</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr v-for="profile in profiles" :key="profile.username"
                                                    class="border-b hover:bg-gray-50"
                                                    :class="{'bg-blue-50': selectedProfiles.includes(profile.username)}">
                                                    <td class="p-3 text-center">
                                                        <input type="checkbox"
                                                            :checked="selectedProfiles.includes(profile.username)"
                                                            @click="handleProfileSelect($event, profile, profiles)"
                                                            class="w-4 h-4 cursor-pointer">
                                                    </td>
                                                    <td class="p-2 text-center text-xl" :title="'–ê–∫—Ç–∏–≤–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å'">üü¢
                                                    </td>
                                                    <td class="p-2 font-medium">
                                                        <input v-model="profile.username"
                                                            class="w-full border-b border-transparent hover:border-gray-300 p-1 bg-transparent"
                                                            placeholder="Username">
                                                    </td>
                                                    <td class="p-2">
                                                        <select v-model="profile.theme_key"
                                                            class="w-full border-b border-transparent hover:border-gray-300 p-1 bg-transparent text-sm">
                                                            <option value="" class="text-gray-400">–ë–µ–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
                                                            </option>
                                                            <option v-for="theme in availableThemes" :key="theme"
                                                                :value="theme">
                                                                {{ theme }}
                                                            </option>
                                                        </select>
                                                    </td>
                                                    <td class="p-2">
                                                        <div class="flex gap-1 flex-wrap">
                                                            <span v-for="platform in profile.platforms" :key="platform"
                                                                class="px-2 py-0.5 text-xs rounded border" :class="{
                                    'bg-pink-50 border-pink-200 text-pink-700': platform === 'instagram',
                                    'bg-blue-50 border-blue-200 text-blue-700': platform === 'tiktok',
                                    'bg-red-50 border-red-200 text-red-700': platform === 'youtube'
                                  }">
                                                                {{ platform }}
                                                            </span>
                                                            <span
                                                                v-if="!profile.platforms || profile.platforms.length === 0"
                                                                class="text-gray-400 text-xs italic">
                                                                –ù–µ—Ç –ø–ª–∞—Ç—Ñ–æ—Ä–º
                                                            </span>
                                                            <span
                                                                v-if="!profile.platforms || profile.platforms.length === 0"
                                                                class="text-gray-400 text-xs italic">
                                                                –ù–µ—Ç –ø–ª–∞—Ç—Ñ–æ—Ä–º
                                                            </span>
                                                        </div>
                                                    </td>
                                                    <td class="p-2 text-center">
                                                        <input type="number" min="0" max="50"
                                                            v-model.number="profile.instagramLimit" placeholder="-"
                                                            class="w-12 border-b border-transparent hover:border-gray-300 p-1 bg-transparent text-center text-sm"
                                                            title="Instagram –ª–∏–º–∏—Ç (–ø—É—Å—Ç–æ = –≥–ª–æ–±–∞–ª—å–Ω—ã–π)">
                                                    </td>
                                                    <td class="p-2 text-center">
                                                        <input type="number" min="0" max="50"
                                                            v-model.number="profile.tiktokLimit" placeholder="-"
                                                            class="w-12 border-b border-transparent hover:border-gray-300 p-1 bg-transparent text-center text-sm"
                                                            title="TikTok –ª–∏–º–∏—Ç (–ø—É—Å—Ç–æ = –≥–ª–æ–±–∞–ª—å–Ω—ã–π)">
                                                    </td>
                                                    <td class="p-2 text-center">
                                                        <input type="number" min="0" max="50"
                                                            v-model.number="profile.youtubeLimit" placeholder="-"
                                                            class="w-12 border-b border-transparent hover:border-gray-300 p-1 bg-transparent text-center text-sm"
                                                            title="YouTube –ª–∏–º–∏—Ç (–ø—É—Å—Ç–æ = –≥–ª–æ–±–∞–ª—å–Ω—ã–π)">
                                                    </td>
                                                    <td class="p-2 text-center">
                                                        <label class="inline-flex items-center cursor-pointer">
                                                            <input type="checkbox" :checked="profile.enabled !== false"
                                                                @change="toggleProfileEnabled(profile)"
                                                                class="sr-only peer">
                                                            <div
                                                                class="relative w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600">
                                                            </div>
                                                        </label>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Disabled Profiles -->
                        <div v-if="disabledProfiles.length > 0">
                            <button @click="showDisabledProfiles = !showDisabledProfiles"
                                class="w-full flex justify-between items-center text-lg font-semibold mb-3 p-3 bg-gray-50 hover:bg-gray-100 rounded text-gray-600">
                                <span>‚ö´ –î–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ ({{ disabledProfiles.length }})</span>
                                <span class="text-2xl">{{ showDisabledProfiles ? '‚ñº' : '‚ñ∂' }}</span>
                            </button>

                            <!-- BULK ACTIONS BAR for Disabled Profiles -->
                            <div v-if="selectedDisabledProfiles.length > 0 && showDisabledProfiles"
                                class="sticky top-0 z-10 bg-gray-600 text-white p-4 rounded shadow-lg mb-4 flex justify-between items-center">
                                <div class="font-bold">
                                    –í—ã–±—Ä–∞–Ω–æ –ø—Ä–æ—Ñ–∏–ª–µ–π: {{ selectedDisabledProfiles.length }}
                                </div>
                                <div class="flex items-center gap-2">
                                    <span>–ü—Ä–∏–º–µ–Ω–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é –∫–æ –≤—Å–µ–º:</span>
                                    <select v-model="bulkThemeKeyDisabled"
                                        class="p-1 px-2 rounded text-black w-40 border border-gray-300">
                                        <option disabled value="">–í—ã–±–µ—Ä–∏—Ç–µ...</option>
                                        <option v-for="theme in availableThemes" :key="theme" :value="theme">
                                            {{ theme }}
                                        </option>
                                    </select>
                                    <button @click="applyBulkCategoryDisabled"
                                        class="bg-white text-gray-600 font-bold px-4 py-1 rounded hover:bg-gray-100">
                                        –ü—Ä–∏–º–µ–Ω–∏—Ç—å
                                    </button>

                                    <div class="border-l border-gray-400 pl-4 ml-2 flex items-center gap-2">
                                        <span class="text-sm font-medium">–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å:</span>
                                        <label class="inline-flex items-center cursor-pointer">
                                            <input type="checkbox"
                                                :checked="selectedDisabledProfiles.some(u => config.profiles.find(p => p.username === u)?.enabled !== false)"
                                                @change="toggleBulkEnabledDisabled($event.target.checked)"
                                                class="sr-only peer">
                                            <div
                                                class="relative w-11 h-6 bg-gray-800 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-gray-300 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-400">
                                            </div>
                                            <span class="ml-2 text-sm font-medium text-gray-100"
                                                v-if="selectedDisabledProfiles.some(u => config.profiles.find(p => p.username === u)?.enabled !== false)">–í–ö–õ</span>
                                            <span class="ml-2 text-sm font-medium text-gray-200" v-else>–í–´–ö–õ</span>
                                        </label>
                                    </div>
                                    <button @click="selectedDisabledProfiles = []"
                                        class="ml-4 text-sm text-gray-200 hover:text-white underline">
                                        –°–±—Ä–æ—Å–∏—Ç—å –≤—ã–¥–µ–ª–µ–Ω–∏–µ
                                    </button>
                                </div>
                            </div>

                            <div v-if="showDisabledProfiles" class="opacity-60">
                                <div v-for="(profiles, theme) in groupedDisabledProfiles" :key="theme"
                                    class="mb-4 border rounded overflow-hidden">
                                    <!-- Group Header -->
                                    <div
                                        class="bg-gray-50 p-3 font-semibold flex justify-between items-center hover:bg-gray-100 transition-colors">
                                        <div class="flex items-center gap-3 flex-1">
                                            <input type="checkbox"
                                                :checked="profiles.every(p => selectedDisabledProfiles.includes(p.username))"
                                                @change="toggleGroupSelectionDisabled(profiles, $event.target.checked)"
                                                class="w-5 h-5 rounded cursor-pointer" title="–í—ã–±—Ä–∞—Ç—å –≤—Å—é –≥—Ä—É–ø–ø—É">

                                            <div @click="toggleGroupDisabled(theme)"
                                                class="flex items-center gap-2 cursor-pointer flex-1">
                                                <span>üìÅ {{ theme }}</span>
                                                <span
                                                    class="bg-gray-200 text-gray-800 text-xs px-2 py-1 rounded-full">{{
                                                    profiles.length
                                                    }}</span>
                                            </div>
                                        </div>
                                        <span @click="toggleGroupDisabled(theme)"
                                            class="text-gray-500 cursor-pointer p-2">{{
                                            expandedGroupsDisabled[theme]
                                            ? '‚ñº' : '‚ñ∂' }}</span>
                                    </div>

                                    <!-- Group Content (Table) -->
                                    <div v-show="expandedGroupsDisabled[theme]" class="border-t">
                                        <table class="w-full border-collapse">
                                            <thead class="bg-gray-50 text-xs text-gray-500 uppercase">
                                                <tr>
                                                    <th class="p-3 w-8"><input type="checkbox"
                                                            @change="toggleGroupSelectionDisabled(profiles, $event.target.checked)"
                                                            :checked="profiles.every(p => selectedDisabledProfiles.includes(p.username))">
                                                    </th>
                                                    <th class="text-left p-3 w-12"></th>
                                                    <th class="text-left p-3">–ü—Ä–æ—Ñ–∏–ª—å</th>
                                                    <th class="text-left p-3">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</th>
                                                    <th class="text-left p-3">–ü–ª–∞—Ç—Ñ–æ—Ä–º—ã</th>
                                                    <th class="text-left p-3 w-20">–õ–∏–º–∏—Ç</th>
                                                    <th class="text-center p-3 w-32">–î–µ–π—Å—Ç–≤–∏—è</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr v-for="profile in profiles" :key="profile.username"
                                                    class="border-b hover:bg-gray-50"
                                                    :class="{'bg-gray-100': selectedDisabledProfiles.includes(profile.username)}">
                                                    <td class="p-3 text-center">
                                                        <input type="checkbox"
                                                            :checked="selectedDisabledProfiles.includes(profile.username)"
                                                            @click="handleProfileSelectDisabled($event, profile, profiles)"
                                                            class="w-4 h-4 cursor-pointer">
                                                    </td>
                                                    <td class="p-2 text-center text-xl" :title="'–î–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω'">‚ö´</td>
                                                    <td class="p-2 font-medium text-gray-500">{{ profile.username }}
                                                    </td>
                                                    <td class="p-2 text-gray-500">{{ profile.theme_key }}</td>
                                                    <td class="p-2">
                                                        <div class="flex gap-2">
                                                            <span v-for="platform in profile.platforms" :key="platform"
                                                                class="px-2 py-1 text-xs rounded bg-gray-200 text-gray-600">
                                                                {{ platform === 'instagram' ? 'Instagram' : platform ===
                                                                'tiktok' ? 'TikTok' : 'YouTube'
                                                                }}
                                                            </span>
                                                        </div>
                                                    </td>
                                                    <td class="p-2 text-gray-400 text-center">
                                                        {{ profile.limit || '-' }}
                                                    </td>
                                                    <td class="p-2 text-center">
                                                        <label class="inline-flex items-center cursor-pointer">
                                                            <input type="checkbox" :checked="profile.enabled !== false"
                                                                @change="toggleProfileEnabled(profile)"
                                                                class="sr-only peer">
                                                            <div
                                                                class="relative w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600">
                                                            </div>
                                                        </label>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- CLIENTS TAB -->
                    <div v-if="currentTab === 'clients'">
                        <div class="flex justify-between items-center mb-4">
                            <h2 class="text-2xl font-bold">–ö–ª–∏–µ–Ω—Ç—ã –∏ –ü—Ä–æ–º—Ç—ã (AI)</h2>
                            <button @click="addClient" class="text-sm bg-gray-200 px-3 py-1 rounded hover:bg-gray-300">+
                                –î–æ–±–∞–≤–∏—Ç—å
                                –∫–ª–∏–µ–Ω—Ç–∞</button>
                        </div>

                        <div v-for="(client, idx) in config.clients" :key="idx"
                            class="border p-4 rounded mb-4 bg-gray-50">
                            <div class="grid grid-cols-3 gap-4 mb-2">
                                <div>
                                    <label class="text-sm text-gray-500 block">–ò–º—è –∫–ª–∏–µ–Ω—Ç–∞ (–±—Ä–µ–Ω–¥)</label>
                                    <input v-model="client.name" class="w-full border p-2 rounded">
                                </div>
                                <div>
                                    <label class="text-sm text-gray-500 block">Regex –ø–∞–ø–∫–∏</label>
                                    <input v-model="client.regex" class="w-full border p-2 rounded font-mono">
                                </div>
                                <div>
                                    <label class="text-sm text-gray-500 block">–ö–≤–æ—Ç–∞ (–≤–∏–¥–µ–æ/–º–µ—Å—è—Ü)</label>
                                    <input v-model.number="client.quota" type="number" min="0"
                                        class="w-full border p-2 rounded" placeholder="30">
                                    <div v-if="client.quota" class="mt-2">
                                        <div class="text-xs text-gray-600 mb-1">
                                            <span class="font-semibold">{{ getClientPublished(client) }}</span> / {{
                                            client.quota }}
                                            –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–æ
                                            <span class="text-green-600 ml-2">(–æ—Å—Ç–∞–ª–æ—Å—å: {{ getClientRemaining(client)
                                                }})</span>
                                        </div>
                                        <div class="w-full bg-gray-200 rounded-full h-2 overflow-hidden">
                                            <div class="bg-blue-500 h-full transition-all"
                                                :style="{ width: getClientProgress(client) + '%' }">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div>
                                <label class="text-sm text-gray-500 block">AI –°–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º—Ç</label>
                                <textarea v-model="client.prompt"
                                    class="w-full border p-2 rounded h-32 font-mono text-sm"></textarea>
                            </div>
                            <div class="text-right mt-2">
                                <button @click="removeClient(idx)" class="text-red-500 text-sm hover:underline">–£–¥–∞–ª–∏—Ç—å
                                    –∫–ª–∏–µ–Ω—Ç–∞</button>
                            </div>
                        </div>
                    </div>

                    <!-- LOGS TAB -->
                    <div v-if="currentTab === 'logs'">
                        <div class="flex justify-between items-center mb-4">
                            <h2 class="text-2xl font-bold">üìã –õ–æ–≥–∏ —Å–∏—Å—Ç–µ–º—ã</h2>
                            <div class="flex gap-2">
                                <label class="flex items-center gap-2 text-sm">
                                    <input type="checkbox" v-model="logsAutoRefresh" class="rounded">
                                    <span>–ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ (3 —Å–µ–∫)</span>
                                </label>
                                <button @click="loadLogs" aria-label="–û–±–Ω–æ–≤–∏—Ç—å –ª–æ–≥–∏ —Å–∏—Å—Ç–µ–º—ã"
                                    class="text-sm bg-blue-500 text-white px-3 py-1 rounded hover:bg-blue-600 focus-visible:ring-2 focus-visible:ring-blue-300">
                                    üîÑ –û–±–Ω–æ–≤–∏—Ç—å
                                </button>
                            </div>
                        </div>

                        <div v-if="logsLoading" class="text-center text-gray-500 py-8">
                            –ó–∞–≥—Ä—É–∑–∫–∞ –ª–æ–≥–æ–≤...
                        </div>

                        <div v-else-if="!logsSuccess" class="bg-yellow-50 border border-yellow-200 rounded p-4 mb-4">
                            <p class="text-yellow-800">‚ö†Ô∏è {{ logsMessage }}</p>
                            <p class="text-sm text-yellow-700 mt-2">
                                –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ª–æ–≥–∏ Docker/EasyPanel –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –≤—ã–≤–æ–¥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.
                            </p>
                        </div>

                        <div v-else class="bg-gray-900 text-green-400 p-4 rounded font-mono text-xs overflow-auto"
                            style="max-height: 600px;">
                            <div v-for="(line, idx) in logs" :key="idx" class="hover:bg-gray-800">
                                {{ line }}
                            </div>
                            <div v-if="logs.length === 0" class="text-gray-500 text-center py-4">
                                –õ–æ–≥–æ–≤ –ø–æ–∫–∞ –Ω–µ—Ç
                            </div>
                        </div>
                    </div>


                </div>
            </div>
        </div>
        <script src="/js/app.js?v=revert_fix"></script>
</body>

</html>